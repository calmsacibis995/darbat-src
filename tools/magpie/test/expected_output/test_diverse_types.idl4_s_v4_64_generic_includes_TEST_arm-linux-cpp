/* 
 * This is an automatically-generated file.
 * Source file  : test/input/diverse_types.idl4
 * Output file  : -
 * Platform     : V4 Generic
 * Mapping      : CORBA C
 *
 * Generated by Magpie VERSION_REMOVED
*/

#define IDL4_OMIT_FRAME_POINTER 0 /* Unimplemented */
#define IDL4_USE_FASTCALL 0 /* Unimplemented */
#define IDL4_NEED_MALLOC 0 /* Unimplemented */
#define IDL4_API v4
#define IDL4_ARCH generic

#define MAGPIE_BYTES_PER_WORD (sizeof(L4_Word_t))

#ifdef __cplusplus
extern "C" {
#endif
#include "idl4/idl4.h"
#ifdef __cplusplus
}
#endif





#if !defined(__-__)
#define __-__




/* Interface iguana_pd */
void iguana_pd_server(void);
void iguana_pd_discard(void);


#define IGUANA_PD_DEFAULT_VTABLE { service_iguana_pd_func1, service_iguana_pd_func2, service_iguana_pd_func3, service_iguana_pd_func4, service_iguana_pd_func5 }
#define IGUANA_PD_DEFAULT_VTABLE_SIZE 5


#define IGUANA_PD_MAX_FID 4
#define IGUANA_PD_MSGBUF_SIZE 0 /* Unimplemented */
#define IGUANA_PD_STRBUF_SIZE 0 /* Unimplemented */
#define IGUANA_PD_FID_MASK 0x7







typedef union {
	struct {
		long _msgtag;
		char inarg;
		
	} _in;
	struct {
		long _spacer[__L4_NUM_MRS];
		long _msgtag;
		char outarg;
		char __retval;
		
	} _out;
	struct {
		long _spacer[__L4_NUM_MRS*2];
		idl4_inverse_stringitem _str[16];
		long _acceptor;
	} _buf;
} _param_iguana_pd_func1;

long service_iguana_pd_func1(L4_ThreadId_t _caller, _param_iguana_pd_func1 *_par);

inline char iguana_pd_func1_implementation (CORBA_Object _caller, char inarg, char *outarg, idl4_server_environment *_env);


/* Number of output words is the size of the structure minus padding and message tag. */

#define _MAGPIE_IGUANA_PD_FUNC1_OUTPUT_BYTES (sizeof(_par->_out) - (sizeof(long) * __L4_NUM_MRS) - (sizeof(long)))



#define IDL4_PUBLISH_IGUANA_PD_FUNC1(_func) long service_iguana_pd_func1(L4_ThreadId_t _caller, _param_iguana_pd_func1 *_par) { \
	idl4_server_environment _env; \
	_env._action = 0;\
\
	/* invoke service */ \
	_par->_out.__retval = _func(_caller, _par->_in.inarg, &_par->_out.outarg, &_env); \
\
	if (IDL4_EXPECT_TRUE(_env._action == 0)) {\
		/* Why marshal things to themselves? */ \
		/* jump back */ \
		/* the weird numbers: (2 * num fpages) << 6 + (num output words ) */ \
		_par->_out._msgtag = (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC1_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		return (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC1_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		/*was 1 */\
	} \
	return -1; \
}




#define IDL4_PUBLISH_iguana_pd_func1 IDL4_PUBLISH_IGUANA_PD_FUNC1
static inline void iguana_pd_func1_reply(CORBA_Object _client, char * outarg , char __retval )
{
	struct _reply_buffer {
		struct {
			long _msgtag;
			
			char outarg;
			
			char __retval;
		} _out;
	} _buf;
	struct _reply_buffer *_par = &_buf;

	/* Marshal reply */
	_par->_out.outarg = * outarg;
	
	_par->_out.__retval = __retval;
	
	/* send message */

	_buf._out._msgtag = 1 + (0 << 6);
	L4_MsgLoad((L4_Msg_t *)((void *)_par));
	L4_Reply(_client);
}





typedef union {
	struct {
		long _msgtag;
		short inarg;
		
	} _in;
	struct {
		long _spacer[__L4_NUM_MRS];
		long _msgtag;
		short outarg;
		short __retval;
		
	} _out;
	struct {
		long _spacer[__L4_NUM_MRS*2];
		idl4_inverse_stringitem _str[16];
		long _acceptor;
	} _buf;
} _param_iguana_pd_func2;

long service_iguana_pd_func2(L4_ThreadId_t _caller, _param_iguana_pd_func2 *_par);

inline short iguana_pd_func2_implementation (CORBA_Object _caller, short inarg, short *outarg, idl4_server_environment *_env);


/* Number of output words is the size of the structure minus padding and message tag. */

#define _MAGPIE_IGUANA_PD_FUNC2_OUTPUT_BYTES (sizeof(_par->_out) - (sizeof(long) * __L4_NUM_MRS) - (sizeof(long)))



#define IDL4_PUBLISH_IGUANA_PD_FUNC2(_func) long service_iguana_pd_func2(L4_ThreadId_t _caller, _param_iguana_pd_func2 *_par) { \
	idl4_server_environment _env; \
	_env._action = 0;\
\
	/* invoke service */ \
	_par->_out.__retval = _func(_caller, _par->_in.inarg, &_par->_out.outarg, &_env); \
\
	if (IDL4_EXPECT_TRUE(_env._action == 0)) {\
		/* Why marshal things to themselves? */ \
		/* jump back */ \
		/* the weird numbers: (2 * num fpages) << 6 + (num output words ) */ \
		_par->_out._msgtag = (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC2_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		return (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC2_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		/*was 1 */\
	} \
	return -1; \
}




#define IDL4_PUBLISH_iguana_pd_func2 IDL4_PUBLISH_IGUANA_PD_FUNC2
static inline void iguana_pd_func2_reply(CORBA_Object _client, short * outarg , short __retval )
{
	struct _reply_buffer {
		struct {
			long _msgtag;
			
			short outarg;
			
			short __retval;
		} _out;
	} _buf;
	struct _reply_buffer *_par = &_buf;

	/* Marshal reply */
	_par->_out.outarg = * outarg;
	
	_par->_out.__retval = __retval;
	
	/* send message */

	_buf._out._msgtag = 1 + (0 << 6);
	L4_MsgLoad((L4_Msg_t *)((void *)_par));
	L4_Reply(_client);
}





typedef union {
	struct {
		long _msgtag;
		int inarg;
		
	} _in;
	struct {
		long _spacer[__L4_NUM_MRS];
		long _msgtag;
		int outarg;
		int __retval;
		
	} _out;
	struct {
		long _spacer[__L4_NUM_MRS*2];
		idl4_inverse_stringitem _str[16];
		long _acceptor;
	} _buf;
} _param_iguana_pd_func3;

long service_iguana_pd_func3(L4_ThreadId_t _caller, _param_iguana_pd_func3 *_par);

inline int iguana_pd_func3_implementation (CORBA_Object _caller, int inarg, int *outarg, idl4_server_environment *_env);


/* Number of output words is the size of the structure minus padding and message tag. */

#define _MAGPIE_IGUANA_PD_FUNC3_OUTPUT_BYTES (sizeof(_par->_out) - (sizeof(long) * __L4_NUM_MRS) - (sizeof(long)))



#define IDL4_PUBLISH_IGUANA_PD_FUNC3(_func) long service_iguana_pd_func3(L4_ThreadId_t _caller, _param_iguana_pd_func3 *_par) { \
	idl4_server_environment _env; \
	_env._action = 0;\
\
	/* invoke service */ \
	_par->_out.__retval = _func(_caller, _par->_in.inarg, &_par->_out.outarg, &_env); \
\
	if (IDL4_EXPECT_TRUE(_env._action == 0)) {\
		/* Why marshal things to themselves? */ \
		/* jump back */ \
		/* the weird numbers: (2 * num fpages) << 6 + (num output words ) */ \
		_par->_out._msgtag = (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC3_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		return (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC3_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		/*was 2 */\
	} \
	return -1; \
}




#define IDL4_PUBLISH_iguana_pd_func3 IDL4_PUBLISH_IGUANA_PD_FUNC3
static inline void iguana_pd_func3_reply(CORBA_Object _client, int * outarg , int __retval )
{
	struct _reply_buffer {
		struct {
			long _msgtag;
			
			int outarg;
			
			int __retval;
		} _out;
	} _buf;
	struct _reply_buffer *_par = &_buf;

	/* Marshal reply */
	_par->_out.outarg = * outarg;
	
	_par->_out.__retval = __retval;
	
	/* send message */

	_buf._out._msgtag = 2 + (0 << 6);
	L4_MsgLoad((L4_Msg_t *)((void *)_par));
	L4_Reply(_client);
}





typedef union {
	struct {
		long _msgtag;
		long inarg;
		
	} _in;
	struct {
		long _spacer[__L4_NUM_MRS];
		long _msgtag;
		long outarg;
		long __retval;
		
	} _out;
	struct {
		long _spacer[__L4_NUM_MRS*2];
		idl4_inverse_stringitem _str[16];
		long _acceptor;
	} _buf;
} _param_iguana_pd_func4;

long service_iguana_pd_func4(L4_ThreadId_t _caller, _param_iguana_pd_func4 *_par);

inline long iguana_pd_func4_implementation (CORBA_Object _caller, long inarg, long *outarg, idl4_server_environment *_env);


/* Number of output words is the size of the structure minus padding and message tag. */

#define _MAGPIE_IGUANA_PD_FUNC4_OUTPUT_BYTES (sizeof(_par->_out) - (sizeof(long) * __L4_NUM_MRS) - (sizeof(long)))



#define IDL4_PUBLISH_IGUANA_PD_FUNC4(_func) long service_iguana_pd_func4(L4_ThreadId_t _caller, _param_iguana_pd_func4 *_par) { \
	idl4_server_environment _env; \
	_env._action = 0;\
\
	/* invoke service */ \
	_par->_out.__retval = _func(_caller, _par->_in.inarg, &_par->_out.outarg, &_env); \
\
	if (IDL4_EXPECT_TRUE(_env._action == 0)) {\
		/* Why marshal things to themselves? */ \
		/* jump back */ \
		/* the weird numbers: (2 * num fpages) << 6 + (num output words ) */ \
		_par->_out._msgtag = (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC4_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		return (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC4_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		/*was 2 */\
	} \
	return -1; \
}




#define IDL4_PUBLISH_iguana_pd_func4 IDL4_PUBLISH_IGUANA_PD_FUNC4
static inline void iguana_pd_func4_reply(CORBA_Object _client, long * outarg , long __retval )
{
	struct _reply_buffer {
		struct {
			long _msgtag;
			
			long outarg;
			
			long __retval;
		} _out;
	} _buf;
	struct _reply_buffer *_par = &_buf;

	/* Marshal reply */
	_par->_out.outarg = * outarg;
	
	_par->_out.__retval = __retval;
	
	/* send message */

	_buf._out._msgtag = 2 + (0 << 6);
	L4_MsgLoad((L4_Msg_t *)((void *)_par));
	L4_Reply(_client);
}





typedef union {
	struct {
		long _msgtag;
		char inarg1;
		short inarg2;
		int inarg3;
		
	} _in;
	struct {
		long _spacer[__L4_NUM_MRS];
		long _msgtag;
		short outarg;
		long outarg2;
		short __retval;
		
	} _out;
	struct {
		long _spacer[__L4_NUM_MRS*2];
		idl4_inverse_stringitem _str[16];
		long _acceptor;
	} _buf;
} _param_iguana_pd_func5;

long service_iguana_pd_func5(L4_ThreadId_t _caller, _param_iguana_pd_func5 *_par);

inline short iguana_pd_func5_implementation (CORBA_Object _caller, char inarg1, short inarg2, int inarg3, short *outarg, long *outarg2, idl4_server_environment *_env);


/* Number of output words is the size of the structure minus padding and message tag. */

#define _MAGPIE_IGUANA_PD_FUNC5_OUTPUT_BYTES (sizeof(_par->_out) - (sizeof(long) * __L4_NUM_MRS) - (sizeof(long)))



#define IDL4_PUBLISH_IGUANA_PD_FUNC5(_func) long service_iguana_pd_func5(L4_ThreadId_t _caller, _param_iguana_pd_func5 *_par) { \
	idl4_server_environment _env; \
	_env._action = 0;\
\
	/* invoke service */ \
	_par->_out.__retval = _func(_caller, _par->_in.inarg1, _par->_in.inarg2, _par->_in.inarg3, &_par->_out.outarg, &_par->_out.outarg2, &_env); \
\
	if (IDL4_EXPECT_TRUE(_env._action == 0)) {\
		/* Why marshal things to themselves? */ \
		/* jump back */ \
		/* the weird numbers: (2 * num fpages) << 6 + (num output words ) */ \
		_par->_out._msgtag = (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC5_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		return (0 << 6) + \
			(_MAGPIE_IGUANA_PD_FUNC5_OUTPUT_BYTES / MAGPIE_BYTES_PER_WORD); \
		/*was 2 */\
	} \
	return -1; \
}




#define IDL4_PUBLISH_iguana_pd_func5 IDL4_PUBLISH_IGUANA_PD_FUNC5
static inline void iguana_pd_func5_reply(CORBA_Object _client, short * outarg, long * outarg2 , short __retval )
{
	struct _reply_buffer {
		struct {
			long _msgtag;
			
			short outarg;
			
			long outarg2;
			
			short __retval;
		} _out;
	} _buf;
	struct _reply_buffer *_par = &_buf;

	/* Marshal reply */
	_par->_out.outarg = * outarg;
	_par->_out.outarg2 = * outarg2;
	
	_par->_out.__retval = __retval;
	
	/* send message */

	_buf._out._msgtag = 2 + (0 << 6);
	L4_MsgLoad((L4_Msg_t *)((void *)_par));
	L4_Reply(_client);
}





#endif //__-__
